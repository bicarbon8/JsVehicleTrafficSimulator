{"version":3,"file":"jsvts.min.js","sources":["../js/jsvts.js","../js/objects/utils.js","../js/objects/map.js","../js/objects/plotter.js","../js/objects/txtToMapParser.js","../js/classes/movable.js","../js/classes/renderable.js","../js/classes/segment.js","../js/classes/vehicle.js","../js/classes/tempVehicle.js","../js/classes/trafficFlowControl.js","../js/classes/stopLight.js","../js/classes/vehicleGenerator.js","../js/classes/stats.js"],"names":["JSVTS","ID_COUNT","CRASH_CLEANUP_MAX_DELAY","CRASH_CLEANUP_MIN_DELAY","startTime","elapsed","realtime","keepMoving","totalElapsedTime","roadways","defaultRoadway","timeStep","init","initPageElements","initObjects","onLoadComplete","reset","Plotter","Map","resize","dims","getWidthHeight","width","height","docWidth","docHeight","render","loadRoadway","w","window","d","document","e","documentElement","b","querySelector","x","innerWidth","clientWidth","y","innerHeight","clientHeight","toggleAnimationState","stop","start","move","getMovables","forEach","mov","update","requestAnimationFrame","index","jsonObj","TxtToMapParser","parseMapJson","map","Utils","getRandomBetween","min","max","Math","random","getDistanceBetweenTwoPoints","p1","p2","THREE","Line3","Vector3","copy","distance","angleFormedBy","line1","line2","a","end","sub","normalize","acos","dot","PI","isCollidingWith","box1","box2","isIntersectionBox","convertKmphToMps","kilometersPerHour","result","SECONDS_PER_HOUR","METERS_PER_KILOMETER","convertMpsToKmph","metersPerSecond","_movables","up","addMovable","movable","Movable","id","addRenderable","removeMovable","removeRenderable","filter","m","getMovableById","getMovableByType","type","updateMovables","movables","i","getTypesInRangeOf","origin","config","location","getTypesInRangeOfOnSegment","segmentId","segment","getSegments","Segment","getSegmentsStartingAt","point","seg","z","getAvailableSegmentsContainingPoint","segments","allSegments","push","j","laneChangePoints","changePoint","getSimilarSegmentsInRoad","currentSegment","results","name","abs","getTypesInSegment","getTypesNotInSegment","getVehicles","Vehicle","getVehiclesInSegment","getVehiclesNotInSegment","getTfcsInSegment","TrafficFlowControl","renderer","scene","camera","controls","stats","light","initRenderer","initCamera","initControls","initLight","initStats","initScene","initDom","domElement","WebGLRenderer","pointLight","PointLight","position","VIEW_ANGLE","ASPECT","NEAR","FAR","PerspectiveCamera","lookAt","Stats","style","top","right","OrbitControls","damping","addEventListener","sceneObjects","Scene","add","AxisHelper","obj","domObjects","appendChild","removeChild","setSize","aspect","updateProjectionMatrix","renderable","Renderable","mesh","remove","dispose","parseSegmentsJson","length","speedLimit","undefined","speedlimit","roadname","isInlet","isinlet","isMergeLane","ismergelane","parseTfcJson","tfc","parseGeneratorJson","generator","greenDuration","greenduration","redDuration","redduration","startState","startstate","yellowDuration","yellowduration","StopLight","attachMovable","VehicleGenerator","delay","MOVABLE_OPTIONS","self","generateId","options","this","property","prototype","moveTo","call","material","texture","generateMesh","Object","create","constructor","updated","updateMatrix","set","moveBy","translateZ","geometry","SEG_OPTIONS","defaults","key","tangent","axis","radians","generateLaneChangePoints","spline","SplineCurve3","LineBasicMaterial","color","Geometry","vertices","getPoints","line","Line","getTangent","crossVectors","identity","text","TextGeometry","size","tMesh","Mesh","pt","getPoint","rotateY","translateY","SphereGeometry","pointMat","MeshBasicMaterial","sphere","spacing","getLength","VEH_OPTIONS","reactionTime","acceleration","deceleration","changeLaneDelay","isChangingLanes","changeLaneTime","velocity","crashed","crashCleanupTime","getLookAheadDistance","mps","distanceToStop","pow","distanceToReact","distanceTot","BoxGeometry","wireframe","elapsedMs","IsStopping","elapsedSeconds","removed","shouldStop","updateVelocity","distTraveled","remainingDistOnSegment","nextSegments","randIndex","floor","nextSeg","brake","console","log","rand","isStopping","accelerate","setHex","getBoundingBox","computeBoundingBox","boundingBox","skipCollisionCheck","dist","foundV","shouldStopForVehicle","Box3","setFromObject","vehicle","changingLanes","changeLanesIfAvailable","foundTfc","shouldStopForTfc","foundCorner","shouldSlowForCorner","vehicles","v","hasInView","connectedTo","containing","distToSegEnd","found","s","tmpV","TempVehicle","copyFrom","tfcs","closestPoint","possibleLanes","possibleLane","angle","distanceToSegEnd","headingDiff","nextSegment","tmp","corneringSpeed","corneringSpeedCalculator","heading","headingDifference","maxAngle","applyMatrix4","matrix","headingLine","headingToLocation","TVEH_OPTIONS","TFC_ID_COUNT","StopLightState","GREEN","YELLOW","RED","STOPLIGHT_OPTIONS","radius","currentState","stateElapsed","distanceToV","VG_OPTIONS","nextVehicle","generate","prepareNewVehicle","canGenerate","newVehicle","Date","getTime","createElement","cssText","elapsedDiv","simulationTimeDiv","realTimeDiv","step","innerHTML","convertMsToHumanReadable","milliseconds","seconds","parseFloat","round","toFixed","minutes","hours","elapsedReadable"],"mappings":"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"}